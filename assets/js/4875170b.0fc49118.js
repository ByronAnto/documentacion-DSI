"use strict";(self.webpackChunktest_kfc=self.webpackChunktest_kfc||[]).push([[7893],{53785:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var s=r(85893),i=r(11151);const a={},o="Consumo de API de Cupones",c={id:"Canales Digitales/Cupones/Descargar Productos y Precios",title:"Consumo de API de Cupones",description:"Para consumir la API de cupones, utilizamos las siguientes herramientas:",source:"@site/docs/Canales Digitales/Cupones/Descargar Productos y Precios.md",sourceDirName:"Canales Digitales/Cupones",slug:"/Canales Digitales/Cupones/Descargar Productos y Precios",permalink:"/documentacion-DSI/docs/Canales Digitales/Cupones/Descargar Productos y Precios",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Canales Digitales/Cupones/Descargar Productos y Precios.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Cupones",permalink:"/documentacion-DSI/docs/category/cupones"},next:{title:"SWT-Canales",permalink:"/documentacion-DSI/docs/category/swt-canales"}},t={},d=[{value:"En el Postman se va a trabajar con el siguiente AKS:",id:"en-el-postman-se-va-a-trabajar-con-el-siguiente-aks",level:3},{value:"Configurar en Postman:",id:"configurar-en-postman",level:3},{value:"Estructura de JSON de Sincronizaci\xf3n",id:"estructura-de-json-de-sincronizaci\xf3n",level:3},{value:"Configuraci\xf3n del Cup\xf3n",id:"configuraci\xf3n-del-cup\xf3n",level:2},{value:"Categor\xeda Promoci\xf3n:",id:"categor\xeda-promoci\xf3n",level:2},{value:"Beneficios:",id:"beneficios",level:2},{value:"Productos Requeridos",id:"productos-requeridos",level:2},{value:"Restaurantes",id:"restaurantes",level:2},{value:"Redis y su uso:",id:"redis-y-su-uso",level:2},{value:"ENVIO DE SYNCRONIZACION:",id:"envio-de-syncronizacion",level:2},{value:"ARQUITECTURA DE ESTE FLUJO:",id:"arquitectura-de-este-flujo",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"consumo-de-api-de-cupones",children:"Consumo de API de Cupones"}),"\n",(0,s.jsx)(n.p,{children:"Para consumir la API de cupones, utilizamos las siguientes herramientas:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Postman"}),"\n",(0,s.jsx)(n.li,{children:"Redis"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"en-el-postman-se-va-a-trabajar-con-el-siguiente-aks",children:"En el Postman se va a trabajar con el siguiente AKS:"}),"\n",(0,s.jsxs)(n.p,{children:["Aqu\xed se genera el JSON de cupones esto es la informaci\xf3n que est\xe1 en Azure:\r\n",(0,s.jsx)(n.a,{href:"http://integraciones-maxpoint.kfc.com.ec/ecu/22/api/coupon/promocionesFechas",children:"http://integraciones-maxpoint.kfc.com.ec/ecu/22/api/coupon/promocionesFechas"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.h3,{id:"configurar-en-postman",children:"Configurar en Postman:"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Para extraer la informaci\xf3n se cambia las fechas y se genera el JSON de los cupones.\r\n",(0,s.jsx)(n.img,{alt:"Postman",src:r(35704).Z+"",width:"970",height:"431"})]}),"\n",(0,s.jsx)(n.h3,{id:"estructura-de-json-de-sincronizaci\xf3n",children:"Estructura de JSON de Sincronizaci\xf3n"}),"\n",(0,s.jsx)(n.p,{children:"El JSON de sincronizaci\xf3n tiene la siguiente estructura:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Configuraci\xf3n del Cup\xf3n"}),": Datos del cup\xf3n."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Categoria promoci\xf3n"}),": Medio en el que ser\xe1 visible, en este caso, AUTORAPIDO."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Beneficios"}),": Puede ser alg\xfan descuento."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Productos_requeridos"}),": Producto que est\xe1 atado al cup\xf3n."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Restaurantes"}),": En que tienda van a ser aplicados."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Canales"}),": APP"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"configuraci\xf3n-del-cup\xf3n",children:"Configuraci\xf3n del Cup\xf3n"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\r\n  "id_Promociones": "EB1580D4-2F64-4E35-87C4-E10CAFF7E4D7",\r\n  "cdn_id": 10,\r\n  "codigo_externo": "7E4D7000000851",\r\n  "nombre": "COMBO KCS CRISPY BBQ 40 OFF CUPON APP",\r\n  "nombre_imprimible": "1 KENTUCKY CRISPY BBQ + PAPA FRITA REG - BEBIDA BOTELLA",\r\n  "codigo_amigable": "",\r\n  "limite_canjes_total": 50000,\r\n  "limite_canjes_cliente": 0,\r\n  "total_canjeados": 0,\r\n  "caduca_con_tiempo": 0,\r\n  "tiempo_validez": 0,\r\n  "unidad_tiempo_validez": "",\r\n  "activo_desde": "2024-01-12",\r\n  "activo_hasta": "2024-04-27",\r\n  "requiere_productos": 0,\r\n  "requiere_forma_pago": 0,\r\n  "puntos_acumulables": 0,\r\n  "saldo_acumulable": 0,\r\n  "bruto_minimo_factura": 0,\r\n  "bruto_maximo_factura": 0,\r\n  "cantidad_minima_productos_factura": 0,\r\n  "permite_otras_promociones": 0,\r\n  "maximo_canje_multiple": 0,\r\n  "requiere_dias": 1,\r\n  "dias_canjeable": "5",\r\n  "requiere_horario": 0,\r\n  "horario_canjeable": "",\r\n  "requiere_rango_edad": 0,\r\n  "rango_edad": "",\r\n  "requiere_genero": 0,\r\n  "genero": "",\r\n  "tiene_codigo_unico": 0,\r\n  "activo": 1,\r\n  "motivo_inactivacion": "",\r\n  "permite_descuento_sobre_descuento": 0,\r\n  "concatenador_beneficios": "AND",\r\n  "concatenador_plus_promocion": "AND",\r\n  "requiere_canal": 0,\r\n  "requiere_restaurante": 1,\r\n  "fechacreacion": "2024-01-11T15:45:21.567",\r\n  "lastUser": "3CE99964-D7ED-ED11-800F-C89665503CDF",\r\n  "lastUpdate": "2024-01-11T15:45:21.567",\r\n  "prioridad": 1\r\n  \r\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"categor\xeda-promoci\xf3n",children:"Categor\xeda Promoci\xf3n:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"categoria_promocion": {\r\n"idcategoria": "9E0DB689-660A-4503-8A30-55C98EE236F1",\r\n"descripcion": "Autor\xe1pido",\r\n"categoria_destacada": 0,\r\n"cdn_id": 10\r\n} \n'})}),"\n",(0,s.jsx)(n.h2,{id:"beneficios",children:"Beneficios:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"beneficios": [\r\n{\r\n"plu_id": 58698,\r\n"cantidad": 1,\r\n"plu_descripcion": "COMBO KCS CRISPY BBQ 40 OFF CUPON APP",\r\n"monto_descuento": 0,\r\n"porcentaje_descuento": 0,\r\n"monto_descuento_factura": 0,\r\n"porcentaje_descuento_factura": 0\r\n}\r\n] \n'})}),"\n",(0,s.jsx)(n.h2,{id:"productos-requeridos",children:"Productos Requeridos"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'"productos_requeridos": [\r\n{\r\n"plu_id": 58698,\r\n"cprn_id": 1,\r\n"plu_descripcion": "COMBO KCS CRISPY BBQ 40 OFF CUPON APP",\r\n"plu_num_plu": 58698,\r\n"plu_tipo": "1",\r\n"cdn_id": 10,\r\n"plu_anulacion": 0,\r\n"plu_impuesto": 1,\r\n"plu_codigo_barras": "",\r\n"replica": 1,\r\n"plu_gramo": 0,\r\n"plu_qsr": 0,\r\n"cantidad": 1,\r\n"tiempo_preparacion": 0,\r\n"IDClasificacion": "10049503-85CF-E511-80C6-000D3A3261F3",\r\n"IDStatus": "8E039503-85CF-E511-80C6-000D3A3261F3",\r\n"impuesto1": 0,\r\n"impuesto2": 0,\r\n"impuesto3": 1,\r\n"impuesto4": 0,\r\n "impuesto5": 0,\r\n"nivel": 0,\r\n"idIntegracion": 0,\r\n"lastUser": "C2C009F0-01B1-E611-80C5-000D3A330947",\r\n"lastUpdate": "2024-01-11T10:54:20.503"\r\n}\r\n]\n'})}),"\n",(0,s.jsx)(n.h2,{id:"restaurantes",children:"Restaurantes"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\r\n"rst_id": 1,\r\n"ciu_id": 5,\r\n"cdn_id": 10,\r\n"rst_cod_tienda": "K002",\r\n"rst_descripcion": "9 DE OCTUBRE",\r\n"rst_direccion": "GUAYAS / GUAYAQUIL / AV. 9 DE OCTUBRE 423 Y CHIMBORAZO",\r\n"rst_fono": "023920070",\r\n"rst_serie": "015",\r\n"rst_puntoemision": "050",\r\n"rst_numpiso": 1,\r\n"rst_categoria": "0C049503-85CF-E511-80C6-000D3A3261F3",\r\n"rst_localizacion": "GUAYAQUIL",\r\n"rst_tipo_servicio": "A3039503-85CF-E511-80C6-000D3A3261F3",\r\n"rst_mid": "000000KFC002",\r\n"rst_tiempopedido": 300000,\r\n"rst_horarioatencion": 0,\r\n"rst_num_mesas": 20,\r\n"rst_servicio": 0,\r\n"rst_tipo_cantidad": 1,\r\n"rst_num_personas": 1,\r\n"rst_retoma_orden": null,\r\n"rst_cancelar_pago": 1,\r\n"rst_cajon_fin_transaccion": 1,\r\n"replica": 1,\r\n"IDTipoFacturacion": "A0039503-85CF-E511-80C6-000D3A3261F3", \r\n"IDStatus": "71039503-85CF-E511-80C6-000D3A3261F3",\r\n"nivel": 0,\r\n"lastUser": "C2C009F0-01B1-E611-80C5-000D3A330947",\r\n"lastUpdate": "2020-05-22T17:46:20.280"\r\n}, \n'})}),"\n",(0,s.jsx)(n.h2,{id:"redis-y-su-uso",children:"Redis y su uso:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Redis",src:r(77955).Z+"",width:"986",height:"475"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Aqu\xed podemos validar los siguientes servicios de cupones que tenemos:"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Redis_cupon",src:r(3413).Z+"",width:"772",height:"420"})}),"\n",(0,s.jsx)(n.p,{children:"El Redis es donde se almacena toda la informaci\xf3n que consumi\xf3 Trade con los cambios\r\nrealizados."}),"\n",(0,s.jsx)(n.h2,{id:"envio-de-syncronizacion",children:"ENVIO DE SYNCRONIZACION:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Tenemos 4 puntos en consideraci\xf3n antes del env\xedo:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Solicitar autorizaci\xf3n de Jaime Rodriguez y Mychael Castro"}),"\n",(0,s.jsx)(n.li,{children:"Verificar que el cambio solicitado por MKT este realizado en Azure"}),"\n",(0,s.jsx)(n.li,{children:"Notificar a Trade (Bryan Medina \u2013 Chat Cupones APP) ya que luego del env\xedo el\r\nproveedor debe consumir nuestra data."}),"\n",(0,s.jsxs)(n.li,{children:["Realizar el borrado de cache de Redis con la siguiente URL desde Postman:\r\n",(0,s.jsx)(n.a,{href:"http://20.75.102.76:8080/ecu/22/api/coupon/cupones/sincronizarCache",children:"http://20.75.102.76:8080/ecu/22/api/coupon/cupones/sincronizarCache"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Realizando este proceso se va eliminar todo lo que tenemos en Redis y se actualizar\xe1\r\ncon el nuevo envi\xf3."}),"\n",(0,s.jsx)(n.h2,{id:"arquitectura-de-este-flujo",children:"ARQUITECTURA DE ESTE FLUJO:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Flujo",src:r(52755).Z+"",width:"857",height:"547"})})]})}function u(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},77955:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/Redis-07fb2570bdcc43322779c71ddc13a79f.png"},3413:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/Redis_cupon-4f02cd1798537df8818a3920173d1b71.png"},52755:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/flujo-8ee0255fe96a9f3bdf1cedf2fb5ad805.png"},35704:(e,n,r)=>{r.d(n,{Z:()=>s});const s=r.p+"assets/images/postman-config-c5d1fa70fa8f2e7dba4941449efbf1e5.png"},11151:(e,n,r)=>{r.d(n,{Z:()=>c,a:()=>o});var s=r(67294);const i={},a=s.createContext(i);function o(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);